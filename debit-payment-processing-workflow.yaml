main:
  params: [input]
  steps:
    - verifySecurityToken:
        call: http.post
        args:
          url: https://baas-service-api-sjeaxywgpa-de.a.run.app/baas/api/auth/verify
          body: ${input.token}
          timeout: 1800
        result: tokenVerified
    - processtokenVerificationResult:
       switch:
         - condition: ${not tokenVerified.body}
           next: notifyFailure
         - condition: ${tokenVerified.body}
           next: processDebitPayment
    - notifyFailure:
        assign:
          - resultMessage: "Unauthenticated Request!!!"
        next: result
    - processDebitPayment:
        assign:
          - resultMessage: "Debit Payment Processing Submitted !!!"
        next: result
    - result:
        return: ${resultMessage}
